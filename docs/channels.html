<html><head><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><title>OVO Comms Platform</title><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="description" content="comms-platform" /><meta name="author" content="Comms team" /><meta name="og:image" content="/comms-platform/img/poster.png" /><meta name="og:title" content="OVO Comms Platform" /><meta name="og:site_name" content="OVO Comms Platform" /><meta name="og:url" content="https://ovoenergy.slack.com/messages/hello_comms/" /><meta name="og:type" content="website" /><meta name="og:description" content="comms-platform" /><meta name="twitter:image" content="/comms-platform/img/poster.png" /><meta name="twitter:card" content="summary_large_image" /><meta name="twitter:site" content="" /><link rel="icon" type="image/png" href="/comms-platform/img/favicon.png" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/comms-platform/highlight/styles/default.css" /><link rel="stylesheet" href="/comms-platform/css/style.css" /><link rel="stylesheet" href="/comms-platform/css/palette.css" /><link rel="stylesheet" href="/comms-platform/css/docs.css" /><link rel="stylesheet" href="/comms-platform/css/home.css" /></head><body class="docs"><div id="wrapper"><div id="sidebar-wrapper"><ul id="sidebar" class="sidebar-nav"><li class="sidebar-brand"><a href="/comms-platform/" class="brand"><div class="brand-wrapper" style="background:url('/comms-platform/img/sidebar_brand.png') no-repeat"><span>OVO Comms Platform</span></div></a></li> <li><a href="/comms-platform/docs/index.html" class="">Getting Started</a></li> <li><a href="/comms-platform/docs/templates.html" class="">Templates</a></li> <li><a href="/comms-platform/docs/events.html" class="">Events</a></li> <li><a href="/comms-platform/docs/scheduling.html" class="">Scheduling</a></li> <li><a href="/comms-platform/docs/channels.html" class=" active ">Channels</a></li> <li><a href="/comms-platform/docs/feedback.html" class="">Feedback</a></li></ul></div><div id="page-content-wrapper"><div class="nav"><div class="container-fluid"><div class="row"><div class="col-lg-12"><div class="action-menu pull-left clearfix"><a href="#menu-toggle" id="menu-toggle"><i class="fa fa-bars" aria-hidden="true"></i></a></div><ul class="pull-right"><li class="hidden-xs"><a href="https://github.com/ovotech/comms-platform"><i class="fa fa-eye"></i><span>WATCH<span id="eyes" class="label label-default">--</span></span></a></li><li class="hidden-xs"><a href="https://github.com/ovotech/comms-platform"><i class="fa fa-star-o"></i><span>STARS<span id="stars" class="label label-default">--</span></span></a></li><li><a href="#" onclick="shareSiteTwitter('OVO Comms Platform comms-platform');"><i class="fa fa-twitter"></i></a></li><li><a href="#" onclick="shareSiteFacebook('OVO Comms Platform comms-platform');"><i class="fa fa-facebook"></i></a></li><li><a href="#" onclick="shareSiteGoogle();"><i class="fa fa-google-plus"></i></a></li></ul></div></div></div></div><div id="content" data-github-owner="ovotech" data-github-repo="comms-platform"><div class="content-wrapper"><section><h1 id="channels">Channels</h1>

<p>Comms can be issued over the following channels:</p>

<ul>
  <li>Email</li>
  <li>SMS</li>
  <li>Print</li>
</ul>

<p>Each time a comm is <a href="events.html">triggered</a> the channel the comm is sent over is determined by the following factors:</p>

<h2 id="channels-in-the-template">Channels in the Template</h2>

<p>When a comm <a href="templates.html">template</a> is published, the channels the comm is available over are specified.</p>

<p>A template obviously must have at least one channel, which can be either SMS, email or print.</p>

<h2 id="customer-communication-preferences">Customer Communication Preferences</h2>

<p>Within My OVO customers set which channels they wish to receive comms over, they are able to do this for Service and Marketing comms separately.</p>

<p>For Service comms the customer is forced to choose either Print or Email, with SMS available as an additional option.</p>

<p>Unless specified by the customer in their communication preferences, comms will not be issued via said channel.</p>

<div class="alert alert-info">
If a customer has no Service Communication Preferences this indicates that they have not actually set any, as either email or post must be selected, and therefore the customer's Communication Preferences are not taken into account.
</div>

<p>While the platform is only supporting notification comms, and only supporting email and SMS channels, if a customer has set their Service Communication Preferences to post rather than email, then post is removed from their list of Service Communication Preferences used by the platform.</p>

<h2 id="customer-profile">Customer Profile</h2>

<p>The profiles service provides us with contact details for a customer.</p>

<p>In order to send an email or SMS, an email address or mobile number are required respectively, if these are not present then the comm can not be issued over that channel.</p>

<h2 id="preferred-channels">Preferred Channels</h2>

<p>When you <a href="events.html">trigger</a> a comm you can provide a list of preferred channels by setting the <code class="highlighter-rouge">preferredChannels</code> field.</p>

<p>Note that this is only one of the inputs to the channel selection logic, so the comm may be issued over a channel not specified in this list.</p>

<h3 id="example-triggered-event">Example Triggered Event</h3>

<p>The following example is triggering a MeterReads comm, specifying that we would like to send the comm over SMS if possible, followed by email and then any other channel.</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">com.ovoenergy.comms.model._</span>
<span class="k">import</span> <span class="nn">com.ovoenergy.comms.triggered.Template</span>
                                                                 
<span class="nd">@Template</span><span class="o">(</span><span class="s">"service"</span><span class="o">,</span> <span class="s">"example-for-docs"</span><span class="o">,</span> <span class="s">"0.1"</span><span class="o">)</span>
<span class="k">object</span> <span class="nc">MeterReadsComm</span>
 
<span class="k">val</span> <span class="n">data</span> <span class="k">=</span> <span class="nc">MeterReadsComm</span><span class="o">(</span>
  <span class="n">gas</span> <span class="k">=</span> <span class="nc">None</span><span class="o">,</span> <span class="c1">// not a gas customer
</span>  <span class="n">electricity</span> <span class="k">=</span> <span class="nc">Some</span><span class="o">(</span><span class="nc">MeterReadsComm</span><span class="o">.</span><span class="nc">Electricity</span><span class="o">(</span>
    <span class="n">meters</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(</span>
      <span class="c1">// customer has 2 electricity meters
</span>      <span class="nc">MeterReadsComm</span><span class="o">.</span><span class="nc">Electricity</span><span class="o">.</span><span class="nc">Meter</span><span class="o">(</span><span class="n">firstNumber</span> <span class="k">=</span> <span class="s">"123"</span><span class="o">,</span> <span class="n">secondNumber</span> <span class="k">=</span> <span class="s">"456"</span><span class="o">),</span>
      <span class="nc">MeterReadsComm</span><span class="o">.</span><span class="nc">Electricity</span><span class="o">.</span><span class="nc">Meter</span><span class="o">(</span><span class="n">firstNumber</span> <span class="k">=</span> <span class="s">"789"</span><span class="o">,</span> <span class="n">secondNumber</span> <span class="k">=</span> <span class="s">"123"</span><span class="o">)</span>
    <span class="o">)</span>
  <span class="o">))</span>
<span class="o">)</span>

<span class="k">val</span> <span class="n">metadata</span> <span class="k">=</span> <span class="nc">MetadataV2</span><span class="o">(</span>
	<span class="n">createdAt</span> <span class="k">=</span> <span class="n">java</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="nc">Instant</span><span class="o">.</span><span class="n">now</span><span class="o">(),</span>
	<span class="n">eventId</span> <span class="k">=</span> <span class="n">java</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="nc">UUID</span><span class="o">.</span><span class="n">randomUUID</span><span class="o">().</span><span class="n">toString</span><span class="o">,</span>
	<span class="n">deliverTo</span> <span class="k">=</span> <span class="nc">Customer</span><span class="o">(</span><span class="s">"my-customer"</span><span class="o">),</span>
	<span class="n">traceToken</span> <span class="k">=</span> <span class="n">java</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="nc">UUID</span><span class="o">.</span><span class="n">randomUUID</span><span class="o">().</span><span class="n">toString</span><span class="o">,</span>
	<span class="n">commManifest</span> <span class="k">=</span> <span class="nc">MeterReadsComm</span><span class="o">.</span><span class="n">commManifest</span><span class="o">,</span> <span class="c1">// use the generated comm manifest in the companion object
</span>	<span class="n">friendlyDescription</span> <span class="k">=</span> <span class="s">"awesome comm"</span><span class="o">,</span>
	<span class="n">source</span> <span class="k">=</span> <span class="s">"my amazing service"</span><span class="o">,</span>
	<span class="n">triggerSource</span> <span class="k">=</span> <span class="s">"my amazing service"</span><span class="o">,</span>
	<span class="n">canary</span> <span class="k">=</span> <span class="kc">true</span><span class="o">,</span>
	<span class="n">sourceMetadata</span> <span class="k">=</span> <span class="nc">None</span>
<span class="o">)</span>

<span class="k">val</span> <span class="n">preferredChannels</span> <span class="k">=</span> <span class="nc">Some</span><span class="o">(</span><span class="nc">List</span><span class="o">(</span><span class="nc">SMS</span><span class="o">,</span> <span class="nc">Email</span><span class="o">))</span>
<span class="k">val</span> <span class="n">templateData</span><span class="k">:</span> <span class="kt">Map</span><span class="o">[</span><span class="kt">String</span>, <span class="kt">TemplateData</span><span class="o">]</span> <span class="k">=</span> <span class="n">data</span><span class="o">.</span><span class="n">convertToTemplateData</span>

<span class="k">val</span> <span class="n">event</span> <span class="k">=</span> <span class="nc">TriggeredV3</span><span class="o">(</span>
  <span class="n">metadata</span> <span class="k">=</span> <span class="n">metadata</span><span class="o">,</span> 
  <span class="n">templateData</span> <span class="k">=</span> <span class="n">templateData</span><span class="o">,</span> 
  <span class="n">deliverAt</span> <span class="k">=</span> <span class="nc">None</span><span class="o">,</span> 
  <span class="n">expireAt</span> <span class="k">=</span> <span class="nc">None</span><span class="o">,</span> 
  <span class="n">preferredChannels</span> <span class="k">=</span> <span class="n">preferredChannels</span>
<span class="o">)</span>
</code></pre></div></div>

<h2 id="cost">Cost</h2>

<p>All things being equal the comm will be issued using the cheapest channel.</p>

<h2 id="the-decision-flow">The decision flow</h2>

<p>The following diagram shows how the above are used to determine the channel to send the comm over.</p>

<p><img src="../img/comms-channels-logic.png" alt="Channel selection logic flow" /></p>
</section></div></div></div></div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script><script src="/comms-platform/highlight/highlight.pack.js"></script><script>hljs.configure({
languages:['scala','java','bash']
});
hljs.initHighlighting();
             </script><script src="/comms-platform/js/main.js"></script></body></html>